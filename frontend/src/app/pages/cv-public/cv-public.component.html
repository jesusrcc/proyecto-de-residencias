<div *ngIf="loading" class="loading">Cargando CV...</div>

<div class="cv-container" *ngIf="!loading && user">
  <div class="cv-header">
    <div class="photo">
      <img
        *ngIf="user.photoUrl"
        [src]="user.photoUrl"
        alt="Foto del investigador"
        class="photo-img"
      />
      <div *ngIf="!user.photoUrl" class="photo-placeholder">ğŸ“¸</div>
    </div>

    <div class="info">
      <h2>{{ user.name }} {{ user.firstName }} {{ user.lastName }}</h2>
      <p class="institution">
        <strong>Departamento / InstituciÃ³n</strong> â€” 
        {{ user.country || ' ' }}
      </p>
      <p>ORCID: {{ user.orcid || 'â€”' }}</p>
      <p>{{ user.email }}</p>
      <p *ngIf="user.phone">
        ğŸ“ {{ user.phone }}
      </p>
      <p *ngIf="user.socialLink">
        ğŸŒ <a [href]="user.socialLink" target="_blank">
          {{ user.socialLink }}
        </a>
      </p>
      <p *ngIf="user.googleScholar">
        Google Scholar: 
        <a [href]="user.googleScholar" target="_blank">
          {{ user.googleScholar }}
        </a>
      </p>
      <p *ngIf="user.snip">
        SNIP: {{ user.snip }}
      </p>
    </div>
  </div>

  <div class="cv-section">
    <h3>Trayectoria acadÃ©mica</h3>

    <h4>ProducciÃ³n acadÃ©mica</h4>
    <ol>
      <li *ngFor="let pub of user.publications">
        <strong>{{ pub.title }}</strong>
        <span *ngIf="pub.journal">, {{ pub.journal }}</span>
        <span *ngIf="pub.date"> â€” {{ formatDate(pub.date) }}</span>
      </li>
    </ol>

    <h4>Cursos y formaciÃ³n</h4>
    <ul>
      <li *ngFor="let c of user.courses">
        <strong>{{ c.title }}</strong>
        <span *ngIf="c.institution"> â€” {{ c.institution }}</span>
        <span *ngIf="c.date"> ({{ formatDate(c.date) }})</span>
      </li>
    </ul>

    <h4>Hitos</h4>
    <ul>
      <li *ngFor="let h of user.milestones">
        <span *ngIf="h.date">{{ formatDate(h.date) }} â€” </span>
        <strong>{{ h.title }}</strong>
        <span *ngIf="h.type"> ({{ h.type }})</span>
        <p *ngIf="h.description" class="milestone-description">
          {{ h.description }}
        </p>
      </li>
    </ul>
  </div>
</div>

<div *ngIf="!loading && !user" class="no-data">
  <p>Este CV no estÃ¡ disponible o ha sido eliminado.</p>
</div>
